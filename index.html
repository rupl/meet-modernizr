<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Meet the Modernizr Module</title>
		<meta name="description" content="Meet the Modernizr module">
		<meta name="author" content="Chris Ruppel">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/print.css" type="text/css" media="print">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="css/prism.css">

		<link rel="stylesheet" href="lib/carousel.css">
	</head>

	<body>

		<div class="reveal">

			<!-- Used to fade in a background when a specific slide state is reached -->
			<div class="state-background"></div>

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-state="bluesy">
					<h1 style="font-size: 3.2em; ">Meet the Modernizr Module</h1><br><br>
					<h3>DrupalCon Portland 2013</h3>
					<script>
						// Delicously hacky. Look away.
						if( navigator.userAgent.match( /(iPhone|iPad|iPod|Android)/i ) ) document.write( '<p style="color: rgba(0,0,0,0.3); text-shadow: none;">('+'Tap to navigate'+')</p>' );
					</script>
				</section>

        <section>
          <h2>Who am I?</h2>
          <section>
            <br><br>
            <h3>Chris Ruppel</h3>
            <p>frontend developer</p>
          </section>
          <section>
            <img src="img/4k-logo-square-500px.png" alt="Four Kitchens: we make BIG websites" style="border: 0; box-shadow: none; ">
          </section>
          <section>
            <h3>I do open source stuff:</h3>
            <ul class="fragment">
              <li><a href="http://drupal.org/project/modernizr">Modernizr Drupal module</a>
              <li><a href="https://github.com/Modernizr/Modernizr">Modernizr</a>
              <li><a href="http://drupal.org/project/respondjs">Respond.js Drupal module</a>
              <li><a href="http://groups.drupal.org/html5/drupal-8">D8 HTML5 Initative</a>
              <li><a href="http://groups.drupal.org/mobile/drupal-8">D8 Mobile Initiative</a>
              <li><a href="http://drupal.org/community-initiatives/drupalorg/drupal7">Drupal.org D7 upgrade</a>
            </ul>
          </section>
        </section>

        <section>
          <h2>Lessons from TV</h2>
          <section>
            <br><br>
            <p class="fragment">Strive to deliver the <strong>best</strong> experience everywhere</p>
            <br>
            <p class="fragment">NOT the same experience. <span class="fragment">The best experience.</span></p>
            <br>
            <p class="fragment">Further reading:<br>
              <a href="http://www.slideshare.net/nzakas/progressive-enhancement-20-conference-agnostic">Progressive Enhancement 2.0</a>
              <a href="http://paulirish.com/2011/tiered-adaptive-front-end-experiences/">Tiered Adaptive Frontend Experiences (TAFEE)</a>
              <a href="http://alexsexton.com/talks/modernizr-3-workflow/">Modernizr 3 workflow</a>
            </p>
          </section>
          <section>
            <br>
            <h4>tiered, adaptive front-end experiences</h4>
            <br>
            <p>Customize the experience to the<br> unique capabilities of each browser.<br><br>Prioritize <b>reliable, fast UX</b> over consistency.</p>
          </section>
          <section>
            <p>Old browsers are black/white TVs, new browsers are HD</p>
            <img class="fragment bare" src="img/tv-2.png" style="width: 70%; height: auto;">
          </section>
          <section>
            <img class="bare" src="img/tv-5.png" style="width: 80%; height: auto;">
          </section>
          <section>
            <img class="bare" src="img/tv-6.png" style="width: 80%; height: auto;">
          </section>
        </section>

        <section>
          <section data-state="alert">
            <br>
            <h2>How can we solve...</h2>
            <ul>
              <li class="fragment">Device diversity</li>
              <li class="fragment">Fragmentation between versions</li>
              <li class="fragment">Fragmentation between devices</li>
              <li class="fragment">Backward compatibility</li>
              <li class="fragment">Future friendliness</li>
            </ul>
          </section>
          <section data-state="alert">
            <br><br><br>
            <p>
              user-agent sniffing is error-prone;<br>
              unable to scale as more devices are created
            </p>
          </section>
          <section data-state="soothe">
            <br><br><br>
            <p>Detect individual features on<br> each browser using Javascript</p>
            <br>
            <p class="fragment"><b>Code:</b> <a href="http://www.modernizr.com">http://www.modernizr.com</a></p>
          </section>
          <section>
            <br>
            <h2>When should you test?</h2>
            <p class="fragment">If you need geolocation, test for it.</p>
            <p class="fragment">If you need CSS transitions, test for them.</p>
            <p class="fragment">If you need HTML5 audio or video, test for them.</p>
            <p class="fragment">If you need inline SVG, test for it.</p>
            <p class="fragment">If you need web sockets, test for it.</p>
            <p class="fragment">If you need data URIs, test for them.</p>
            <br>
            <p class="fragment">If you need something cool and the<br> UI breaks without it, test for it.</p>
          </section>
        </section>

        <section>
          <h2>Conditional loading</h2>
          <section>
            <p class="fragment">Load things based on tests</p>
            <br><br>
            <ul class="fragment checks">
              <li>Browser properties
              <li>Browser features
              <li>User actions or preferences
            </ul>
          </section>
          <section>
            <br>
            <br>
            <p>Making these decisions <i><b>in the browser</b></i> is the<br> core mechanism for tiered experiences.</p>
          </section>
        </section>

        <section>
          <section>
            <br>
            <h2>Modernizr.load()</h2>
            <br>
            <pre class="fragment"><code class="language-javascript">
    Modernizr.load({
      test: Modernizr.geolocation,
      nope: '/sites/all/libraries/geolocation/geo.js',
      callback: function(){ geo.init(); }
    });
            </code></pre>
          </section>
          <section>
            <h2>Progressive loading</h2>
            <br>
            <p class="fragment">Modernizr can be used the other way around too.<br> Use it to load stuff <em>only when needed</em>.</p>
            <br>
            <pre class="fragment"><code class="language-javascript">
          Modernizr.load({
            test: Modernizr.mq('(min-width: 42em)'),
             yep: '/sites/all/themes/example/xl.css'
          });
            </code></pre>
            <br>
            <p class="fragment"><a href="http://fourkitchens.com/blog/2013/04/24/one-less-jpg">One Less JPG</a></p>
          </section>
        </section>

        <section>
          <section data-state="blackout">
            <h2>Modernizr module</h2>
            <br><br>
            <p>How does it help me build tiered experiences?</p>
          </section>
          <section>
            <br>
            <h2>Drupal APIs</h2>
            <br>
            <p class="fragment"><i>Test API:</i> allows modules/themes to declare tests</p>
            <br>
            <p class="fragment"><i>Load API:</i> allows modules/themes to use <code>Modernizr.load()</code></p>
            <br>
          </section>
          <section>
            <h2>Test API</h2>
            <br>
            <p class="fragment">Modules use a hook:</p>
            <pre class="fragment"><code class="language-javascript">              function MYMODULE_modernizr_info() {
                $tests[] = 'geolocation';
                return $tests;
              }</code></pre>
            <br>
            <p class="fragment">Themes use the .info file:</p>
            <pre class="fragment"><code class="language-javascript">              modernizr[tests][] = geolocation</code></pre>
          </section>
          <section>
            <h2>Rebuild Modernizr</h2>
            <img class="fragment bare" src="img/modernizr-config.png">
          </section>
          <section>
            <h2>Load API: Modules</h2>
            <br>
            <p class="fragment">Modules use another hook:</p>
            <pre class="fragment" style="width: 120%; font-size: .6em;"><code class="language-javascript">
function MYMODULE_modernizr_load() {
  $load[] = array(
    'test' => 'Modernizr.geolocation',
    'nope' => array('/' . drupal_get_path('module','geolocation') . '/js/geo.js'),
    'callback' => 'function(){ geo.init(); }',
  );
  return $load;
}
</code></pre>
          </section>
          <section>
            <br>
            <p>...which turns into:</p>
            <pre style="width: 100%; left: 0;"><code class="language-javascript">
    Modernizr.load({
      test: Modernizr.geolocation,
      nope: '/sites/all/modules/geolocation/js/geo.js',
      callback: function(){ geo.init(); }
    });
            </code></pre>
          </section>
          <section>
            <h2>Load API: Themes</h2>
            <p class="fragment"><code>mytheme.info</code> file:</p>
            <pre class="fragment" style="width: 110%;"><code class="language-javascript">
modernizr[Modernizr.cssfilters][yep][] = css/super-fancy.css
            </code></pre>
          </section>
          <section>
            <p>...turns into:</p>
            <pre class="fragment" style="width: 110%;"><code class="language-javascript">
  Modernizr.load({
    test: Modernizr.cssfilters,
     yep: '/sites/all/themes/mytheme/css/super-fancy.css'
  });
            </code></pre>
            <br>
            <p class="fragment"><code>mytheme_modernizr_load_alter()</code><br> works the same as module hooks too.</p>
          </section>
          <section>
            <h2>drupal.org docs</h2>
            <br>
            <ul>
              <li><a href="http://drupal.org/project/modernizr">Modernizr module homepage</a></li>
              <li><a href="http://drupal.org/node/1913726">Feature detection</a></li>
              <li><a href="http://drupal.org/node/1913744">Installing Modernizr module</a></li>
              <li><a href="http://drupal.org/node/1913748">Create custom builds using Test API</a></li>
              <li><a href="http://drupal.org/node/1913830">Modernizr.load() basics</a></li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h2>When to use a test?</h2>
            <br>
            <p><a href="http://caniuse.com/">Can I use</a> stays current on browser support</p>
            <br>
            <p class="fragment"><a href="http://html5please.com/">HTML5 Please</a> has polyfills and some loose recommendations.</p>
          </section>
          <section>
            <h2>Don't always use Modernizr</h2>
            <p>Only use it for stuff that's vital</p>
            <br>
            <ul class="xs">
              <li>border-radius has a natural fallback: 0px</li>
              <li>gradients have natural single-color fallbacks</li>
            </ul>
            <br><br>
            <ul class="checks fragment">
              <li>Location-based apps will always need Geolocation</li>
              <li>Inline SVG looks awesome on hi-rez displays and<br>&nbsp; &nbsp; incurs no download penalty</li>
            </ul>
          </section>
        </section>

        <section>
          <section data-state="blackout">
            <h2>Pitching compatibility</h2>
            <br>
            <p><a href="http://www.confreaks.com/videos/2223-html5tx2013-browser-versions-are-dead">Browser versions are dead</a></p>
            <br>
            <p class="fragment">Why limit a site based on a stale browser version?</p>
            <br>
            <p class="fragment">Instead, we should be asking<br> <i>what features are needed to make this site?&nbsp;</i></p>
          </section>
          <section>
            <h2>Use the data we have</h2>
            <br>
            <p class="fragment">Take the high-level requirements (both yours and the client's) and plug it into <a href="http://caniuse.com/">caniuse</a>, and get a rough compatibility percentage</p>
            <br>
            <p class="fragment">Tell your client:<br> "Yes, IE8 will support 83% of the features."</p>
            <br>
          </section>
          <section>
            <h2>Modernizr v3</h2>
            <br>
            <p class="fragment">This type of project estimation is on the roadmap.<p>
            <br>
            <p class="fragment">Tests now include dependencies and links to caniuse.</p>
            <br>
            <p class="fragment">Systems like Drupal are poised to take<br> advantage of this data in an automated fashion.</p>
          </section>
          <section>
            <pre style="font-size: .5em; width: 130%; left: -15%;"><code class="language-javascript">
/*!
{
  "name": "CSS Animations",
  "property": "cssanimations",
  "caniuse": "css-animation",
  "polyfills": ["transformie", "csssandpaper"],
  "tags": ["css"],
  "warnings": ["Android < 4 will pass this test, but can only animate a single property at a time"],
  "notes": [{
    "name" : "Article: 'Dispelling the Android CSS animation myths'",
    "href": "http://goo.gl/CHVJm"
  }]
}
!*/
define(['Modernizr', 'testAllProps'], function( Modernizr, testAllProps ) {
  Modernizr.addTest('cssanimations', testAllProps('animationName'));
});
</code></pre>
          </section>
          <section>
            <h2>Move the web forward</h2>
            <br>
            <p>Nudging clients toward this outlook helps everyone.</p>
            <br>
            <p class="fragment">Especially you!</p>
          </section>
        </section>

        <section data-state="blackout">
          <h1>Questions?</h1>
          <br>
          <p>Contact me:</p>
          <p><a href="http://drupal.org/user/411999">drupal.org/user/411999</a></p>
          <p><a href="https://github.com/rupl">github.com/rupl</a></p>
          <p><a href="http://twitter.com/rupl">twitter.com/rupl</a></p>
          <p>chris &#x2740; fourkitchens.com</p>
        </section>

        <section data-state="bluesy">
          <h2>Rate this session!</h2>
          <br>
          <p>
            <a href="http://portland2013.drupal.org/session/meet-modernizr-module">Visit the session page</a>to leave feedback.<br>
            <small>It means a lot to me ❤ Thanks!</small><br><br>
            Short link: <a href="http://j.mp/meet-modernizr">http://j.mp/meet-modernizr</a><br><br>
            Select <i>"Evaluate This Session"</i>
          </p>
        </section>
			</div>

			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
			</aside>

			<!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
			<div class="progress"><span></span></div>

		</div>

		<!-- Optional libraries for code syntax highlighting and classList support in IE9 -->
    <script src="js/prism.js"></script>
		<script src="lib/classList.js"></script>
		<script src="lib/carousel.js"></script>

		<script src="js/reveal.js"></script>

		<script>
			// Parse the query string into a key/value object
			var query = {};
			location.search.replace( /[A-Z0-9]+?=(\w*)/gi, function(a) {
				query[ a.split( '=' ).shift() ] = a.split( '=' ).pop();
			} );

			// Fires when a slide with data-state=customevent is activated
			Reveal.addEventListener( 'customevent', function() {
				alert( '"customevent" has fired' );
			} );

			// Fires each time a new slide is activated
			Reveal.addEventListener( 'slidechanged', function( event ) {
				// event.previousSlide, event.currentSlide, event.indexh, event.indexv
			} );

			Reveal.initialize({
				// Display controls in the bottom right corner
				controls: true,

				// Display a presentation progress bar
				progress: true,

				// If true; each slide will be pushed to the browser history
				history: true,

				// Loops the presentation, defaults to false
				loop: false,

				// Flags if mouse wheel navigation should be enabled
				mouseWheel: true,

				// Apply a 3D roll to links on hover
				rollingLinks: true,

				// UI style
				theme: query.theme || 'default', // default/neon

				// Transition style
				transition: query.transition || 'default' // default/cube/page/concave/linear(2d)
			});

			hljs.initHighlightingOnLoad();
		</script>

	</body>
</html>
